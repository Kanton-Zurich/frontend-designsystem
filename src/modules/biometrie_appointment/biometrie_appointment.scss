$biometrieViewTransitionDuration: 300ms;

/* stylelint-disable */
// Whole block is needed to overwrite id-stylerules used in the old CMS
#content-column .mdl-biometrie_appointment {
  ul {
    font-size: inherit;
    margin: initial;
    padding-left: initial;
  }

  li {
    margin-left: initial;
    padding-left: initial;
    margin-bottom: initial;
  }

  &__details__checklist {
    li {
      @include sizeCurve('margin-left', mini);
      @include sizeCurve('padding-left', medium);
      margin-bottom: unset;
    }
  }

  .block {
    a {
      padding-bottom: initial;
    }
  }
}
/* stylelint-enable */

.mdl-biometrie_appointment {
  margin-bottom: $sizeHuge;
  overflow: hidden;

  &__heading {
    hyphens: initial;

    &.atm-heading {
      @include sizeCurve('margin-bottom', medium);
    }
  }

  &__logout {
    display: none;
    text-align: right;

    @include polyFluidSizing(font-size, map-get($fontSizeCurves, regular));

    .icon {
      @include sizeCurve('height', smallerRegular);
      margin-bottom: -3px;
      fill: none;
      stroke: $colorBlack60;
      stroke-width: 2;
    }

    &.show {
      display: block;
    }
  }

  &__backlink {
    @include polyFluidSizing(font-size, map-get($fontSizeCurves, regular));
    display: none;

    .icon {
      margin-bottom: -4px;
    }

    &.show {
      display: block;
    }
  }


  .view {
    opacity: 0;
    transition: opacity $biometrieViewTransitionDuration;
    max-height: 0;
    pointer-events: none;

    &.show {
      opacity: 1;
      transition-delay: $biometrieViewTransitionDuration;
      max-height: inherit;
      pointer-events: all;
    }
  }

  &__loginview {

    h3 {
      @include sizeCurve('padding-top', medium);
      @include sizeCurve('margin-bottom', smallerRegular);
    }

    &__input {
      border: 2px solid;
      border-radius: 4px;
      position: relative;
      padding: $sizeRegular;
      border-color: $colorBlack15;

      @include sizeCurve('margin-bottom', mini);

      label {
        font-weight: $fontWeightBlack;
        color: $colorBlack100;
        display: block;

        @include sizeCurve('margin-bottom', mini);
        @include polyFluidSizing(font-size, map-get($fontSizeCurves, tiny));
      }

      span.input {
        border: 0;
        outline: 0;
        background: transparent;
        display: inline-block;
        min-width: 1.2em;
        color: $colorBlack100;
        height: $sizeRegular;
        line-height: $sizeSmallLarge;
        caret-color: $colorCyan;
        font-weight: 200;

        @include polyFluidSizing(font-size, map-get($fontSizeCurves, biggerRegular));
        @include sizeCurve('margin-right', tiny);

        + .input {
          margin-left: $sizeTiny;
        }

        &.filled {
          border: 0;
        }
      }

      .icon-error {
        display: none;
      }

      &.focused {
        border-color: $colorCyan;
      }

      &.error {
        border-color: $colorRed;

        .icon-error {
          color: $colorWhite;
          background-color: $colorRed;
          text-align: center;
          border-radius: 50%;
          font-size: $sizeFontBiggerRegular;
          font-weight: $fontWeightBlack;
          line-height: 1.5rem;
          display: block;
          position: absolute;
          right: $sizeRegular;
          top: calc(50% - 0.75rem);
        }
      }
    }

    &__hint {
      min-height: 2rem;
      border-bottom: 2px solid $colorBlack100;
      margin-bottom: $sizeRegular;
    }

    &__submit {
      clear: both;
      overflow: hidden;

      > * {
        float: right;
      }
    }
  }


  &__details {


    .cell {
      border-bottom: 1px solid $colorBlack20;

      @include sizeCurve('margin-top', mini);

      .label {
        font-weight: 900;

        @include sizeCurve('padding-bottom', mini);
        @include polyFluidSizing(font-size, map-get($fontSizeCurves, tiny));
      }

      .data {
        @include polyFluidSizing(font-size, map-get($fontSizeCurves, regular));
        @include polyFluidSizing(line-height, map-get($fontSizeCurves, biggerRegular));
      }
    }


    .info-box {
      font-size: 100%;
      padding: $sizeSmallRegular $sizeRegular $sizeLarge;
      background-color: #0076bd11;
      color: $colorBlue;

      strong {
        @include polyFluidSizing('font-size', map-get($fontSizeCurves, biggerRegular));
      }

      p {
        @include polyFluidSizing('font-size', map-get($fontSizeCurves, regular));
        @include sizeCurve('margin-top', mini);
      }

      .atm-button {
        @include sizeCurve('margin-top', medium);
      }
    }

    &__confirmation {
      display: none;

      &.show {
        display: block;
      }

      .alert.alert-success.show {
        @include sizeCurve('margin-bottom', medium);

        .details {
          display: inline-block;
        }

        @include mq($to: xsmall) {

          @include sizeCurve(padding-left padding-right, smallerRegular);

          .success-icon {
            display: block;
            position: relative;
            left: 0;
            margin-bottom: 1rem;
          }

          .alert__close {
            @include sizeCurve(top, smallerRegular);
          }
        }
      }

      h3 {
        @include sizeCurve('margin-bottom', medium);

        &:after {
          content: '';
          display: inline-block;
          position: relative;
          transform: rotate(45deg);
          top: 2px;
          border-bottom: $sizeMini solid $colorGreen;
          border-right: $sizeMini solid $colorGreen;

          @include sizeCurve(width, small);
          @include sizeCurve(height left, biggerRegular);
        }
      }

      @include sizeCurve('margin-bottom', large);
    }

    &__persondata {
      @include sizeCurve('margin-bottom', large);
    }

    &__appointmentdata {
      @include sizeCurve('margin-bottom', large);
    }

    &__rescheduleBtn {
      margin: $sizeBig 0;
    }

    &__cal-linklist {
      .cal-linklist_item {
        display: inline-block;
        margin-right: 2rem;
        text-decoration: none;
        color: $colorBlack60;
        font-weight: 900;
        position: relative;
        font-size: 16px;
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
        border-bottom: 2px solid transparent;
        transition: color 100ms ease;
        justify-content: space-between;
        align-items: center;

        @include polyFluidSizing(font-size, map-get($fontSizeCurves, regular));

        &__button {
          margin-top: 0.5rem;
          display: flex;
          align-items: center;
          font-weight: 400;
          color: $colorBlack60;

          @include polyFluidSizing(font-size, map-get($fontSizeCurves, tiny));

          .icon {
            margin-right: 0.75rem;

            use {
              fill: $colorBlack60;
              transition: fill 100ms ease;
            }
          }
        }

        &:hover {
          .cal-linklist_item__button {
            color: $colorBlack100;

            .icon use {
              fill: $colorBlack100;
            }
          }
        }
      }
    }

    &__addinfo {
      .block {
        border-bottom: 2px solid $colorBlack20;

        &.cell {
          @include sizeCurve('margin-bottom', tiny);
        }

        .label {
          padding-bottom: 0;
        }
      }
    }

    &__checklist {
      @extend .info-box;

      @include polyFluidSizing('font-size', map-get($fontSizeCurves, regular));

      strong.boxhead {
        @include sizeCurve('margin-bottom', tiny);
      }

      ul {
        list-style-type: none;
        padding-left: 0;
        margin: 0;
        padding-bottom: $sizeSmallRegular;

        li {
          position: relative;

          @include sizeCurve('margin-left', mini);
          @include sizeCurve('padding-left', medium);

          + li {
            @include sizeCurve('margin-top', smallerRegular);
          }

          &:before {
            content: '';
            display: block;
            position: absolute;
            transform: rotate(45deg);
            left: 0;
            border-bottom: 3px solid $colorBlue;
            border-right: 3px solid $colorBlue;

            @include sizeCurve(width, mini);
            @include polyFluidSizing('height', map-get($fontSizeCurves, regular));
          }
        }
      }

      @include sizeCurve('margin-top', medium);
      @include sizeCurve('margin-bottom', medium);
    }
  }

  &__reschedule {

    &__allopen {

      &__wrapper {
        @include sizeCurve('margin-top', regular);

        .group-wrapper {
          overflow: hidden;
          clear: both;
          line-height: 1;
        }

        ul {
          display: inline-flex;
          padding-left: 0;
          margin: 0;
          line-height: 1;

          @include sizeCurve('margin-right', regular);
          @include polyFluidSizing(font-size, map-get($fontSizeCurves, regular));

          li {
            margin-left: 0;
            padding-left: 0;
            margin-bottom: 0;
          }


          button.disabled {
            cursor: not-allowed;
            pointer-events: none;
            background-color: $colorBlack5;

            use {
              fill: $colorBlack20;
            }
          }

          @include mq($to: small) {
            width: 100%;

            .details {
              width: 100%;
              text-align: center;
            }
          }
        }

        .btn-line {
          position: relative;

          @include sizeCurve('margin-right', tiny);
          @include sizeCurve('bottom', mini);
        }

        @include mq($from: small, $to: medium) {
          ul {
            float: left;
          }

          .btn-line {
            @include sizeCurve('top', mini);

            + .btn-line {
              display: block;
            }
          }
        }
        @include polyFluidSizing(font-size, map-get($fontSizeCurves, regular));
      }

      &__slotselect {
        @include sizeCurve('margin-top', tiny);
        position: relative;
        border-bottom: 2px solid $colorBlack100;
        overflow: hidden;

        .column {
          width: 19%;
          vertical-align: top;

          + .column {
            margin-left: 1%;
          }
        }

        .row {
          display: flex;
          position: relative;
        }

        .slotselect-headrow {
          border-top: 2px solid $colorBlack100;
          border-bottom: 2px solid $colorBlack100;

          @extend .row;

          .weekday-head {
            color: $colorText;
            overflow: hidden;
            text-align: center;
            text-overflow: ellipsis;
            font-weight: 900;

            @extend .column;

            @include sizeCurve('line-height', regular);
            @include sizeCurve('padding-top', regular);
            @include sizeCurve('padding-bottom', regular);
            @include polyFluidSizing('font-size', map-get($fontSizeCurves, tiny));

            &__date {
              color: $colorBlack60;
            }

            &__day_short {
              display: none;
            }
          }
        }

        .slotselect-slotsrow {
          @include sizeCurve(padding-top, mini);
          height: 40vh;
          max-height: 450px;
          overflow-y: scroll;
          overflow-x: hidden;

          @extend .row;

          .weekday-column {
            font-size: pxToRem($sizeFontSmall);
            color: $colorBlack60;
            font-weight: 900;
            text-align: center;
            height: auto;

            @extend .column;

            .weekday-slotscontainer {
              .weekday-slot {
                height: pxToRem($sizeBig);
                line-height: pxToRem($sizeBig);
                font-size: pxToRem($sizeFontSmall);

                @include sizeCurve('margin-bottom', small);

                button.atm-button {
                  width: 100%;
                  padding: 0;

                  .atm-button__text {
                    width: 100%;
                    text-align: center;
                  }

                  &.selected {
                    background: $colorBlue;
                    color: $colorWhite;
                  }

                  &.disabled {
                    background: $colorBlack5;
                    color: $colorBlack20;
                  }
                }

                &:hover {
                  button.atm-button {
                    background: $colorBlack20;
                    color: $colorBlack100;
                  }
                }
              }
            }

            .no-openslots-msg {
              @include sizeCurve('padding', regular);

              display: none;
            }

            &.no-slots-available {
              .no-openslots-msg {
                display: block;

                @include sizeCurve('padding-top', mini);
              }
            }
          }
        }

        .slot {
          height: pxToRem($sizeBig);
          line-height: pxToRem($sizeBig);
          font-size: pxToRem($sizeFontSmall);

          @include sizeCurve('margin-bottom', small);
        }

        @include mq($to: medium) {

          @each $idx in 0, 1, 2, 3, 4 {
            &[ data-selected-weekday='#{$idx}' ] {
              .slotselect-slotsrow {
                right: $idx * 100%;
              }

              .weekday-head:nth-child(#{$idx + 1}) {
                border-bottom: 2px solid $colorBlack100;
                margin-bottom: -1px;
              }
            }
          }

          .slotselect-headrow {
            border-bottom: 1px solid $colorBlack15;

            .weekday-head {
              &__day_short {
                display: block;
              }

              &__day {
                display: none;
              }
            }
          }

          .slotselect-slotsrow {
            width: 500%;
            transition: right 0.8s ease-in-out;

            .weekday-column {
              width: 100%;
              margin-left: 0;

              .weekday-slotscontainer {
                text-align: left;
                margin-left: -2%;

                .weekday-slot {
                  display: inline-block;
                  width: 30%;
                  margin-left: 2%;
                }
              }

              .no-openslots-msg {
                padding: 0;
              }
            }
          }
        }
        @include mq($to: xsmall) {
          .slotselect-slotsrow {
            .weekday-column {
              .weekday-slotscontainer {
                margin-left: -2%;

                .weekday-slot {
                  width: 47%;
                  margin-left: 2%;
                }
              }
            }
          }
        }
      }
    }

    &__selectiondetails {
      display: none;
      overflow: hidden;

      @include sizeCurve('padding-top', regular);
      @include sizeCurve('padding-bottom', regular);

      &.show {
        display: block;
      }

      .atm-button {
        float: right;
        height: 2.5rem;

        @include sizeCurve(padding-left padding-right, biggerRegular);
      }

      @include mq($to: small) {
        .atm-button {
          width: 100%;

          .atm-button__text {
            width: 100%;
            text-align: center;
          }
        }
      }

      &__wrapper {
        float: left;
        max-width: 65%;

        @include mq($to: small) {
          max-width: 100%;
        }

        .selection-details {

          &__date {
            color: $colorBlue;
          }

          &__counter {
            @include polyFluidSizing('font-size', map-get($fontSizeCurves, small));
          }

          &__byselection {
            display: block;
          }

          &__next {
            display: none;
          }

          &__none {
            display: none;
          }
        }
      }

      &.next {
        .selection-details {
          &__byselection {
            display: none;
          }

          &__next {
            display: block;
          }
        }
      }

      &.none {
        .selection-details {
          &__byselection {
            display: none;
          }

          &__date {
            display: none;
          }

          &__counter {
            display: none;
          }

          &__none {
            display: block;
          }
        }

        .atm-button {
          cursor: not-allowed;
          pointer-events: none;
          background-color: $colorBlack40;
          color: $colorWhite;
        }
      }
    }

    &__blockedslot {
      display: none;

      &.show {
        display: block;
      }
    }
  }

  &__loading-spinner {
    &.show {
      @extend .overlay;

      .atm-dual-ring {
        position: absolute;
        height: 64px;
        width: 64px;
        left: 50%;
        margin-left: -32px;
        top: 50%;
        margin-top: -50px;
        display: inline-block;
      }

      .atm-dual-ring:after {
        content: ' ';
        display: block;
        width: 46px;
        height: 46px;
        margin: 1px;
        border-radius: 50%;
        border: 5px solid;
        border-color: #fff transparent;
        animation: atm-dual-ring 1.2s linear infinite;
      }

      @keyframes atm-dual-ring {
        0% {
          transform: rotate(0deg);
        }

        100% {
          transform: rotate(360deg);
        }
      }
    }
  }

  &__unavailable-alert {
    @include sizeCurve('padding', regular);
    @include sizeCurve('padding-left', big);
    position: relative;
    box-shadow: 0 0 5px $colorBlack;
    margin-right: 5px;
    margin-bottom: 5px;
    border-left: 4px solid $colorRed;
    display: none;
    overflow: hidden;

    &__content {
      strong.boxhead {
        color: $colorRed;
      }
    }

    &:before {
      content: '!';
      background-color: $colorRed;
      color: $colorWhite;
      text-align: center;
      border-radius: 50%;
      display: block;
      position: absolute;

      @include polyFluidSizing('font-size', map-get($fontSizeCurves, big));
      @include sizeCurve('width', large);
      @include sizeCurve('left', mini);
      @include sizeCurve('height', large);
      @include sizeCurve('line-height', large);
    }

    @include mq($from: medium) {
      .atm-button {
        @include sizeCurve('margin-top', medium);
        float: right;
      }

      &__content {
        display: inline-block;
      }
    }
    @include mq($to: small) {
      @include sizeCurve('padding-left', regular);
      @include sizeCurve('padding-top', big);

      &:before {
        @include sizeCurve('left', regular);
        @include sizeCurve('top', regular);
      }

      &__content {
        @include sizeCurve('margin-top', mini);
      }
    }

    &.show {
      display: block;
    }
  }

  &__contenttemplate {
    display: none;
  }
}

[ class^='mdl-biometrie_appointment' ] {
  .alert-box {
    &.success {
      background-color: #ebf4e9;

      @include sizeCurve(padding, smallerRegular);
    }

    .super-head {
      margin-bottom: unset;
    }
  }

  .strong {
    color: $colorText;
    font-weight: 900;
  }

  .lighter {
    color: $colorBlack60;
  }

  .hidden-small-down {
    @include mq($to: small) {
      display: none;
    }
  }

  .hidden-small-up {
    @include mq($from: small) {
      display: none;
    }
  }

  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 101;

    .overlay-content {
      position: absolute;
      background-color: $colorWhite;
      left: 50%;
      width: 90%;
      margin-left: -45%;
      top: 10%;

      @include mq($from: small) {
        width: 70%;
        margin-left: -35%;
        top: 15%;
      }
      @include mq($from: medium) {
        width: 66%;
        margin-left: -33%;
        top: 25%;
      }
      @include mq($from: large) {
        width: 38%;
        margin-left: -19%;
        top: 40%;
      }
      @include sizeCurve('padding', biggerRegular);
    }
  }

  .alert {
    display: none;
    color: $colorWhite;
    border-radius: 4px;
    margin-top: 1em;
    margin-bottom: 1em;
    line-height: $sizeLineHeightNarrow;
    position: relative;
    font-weight: 200;

    @include sizeCurve(padding-top padding-bottom, smallerRegular);
    @include sizeCurve(padding-left padding-right, big);
    @include polyFluidSizing('font-size', map-get($fontSizeCurves, small));

    &.alert-error {
      background-color: $colorRed;

      &:before {
        content: '!';
        background-color: $colorWhite;
        color: $colorRed;
        text-align: center;
        border-radius: 50%;
        font-size: $sizeFontBiggerRegular;
        font-weight: $fontWeightBlack;
        line-height: $sizeFontLarge;
        display: block;
        position: absolute;
        left: $sizeRegular;
        top: calc(50% - 0.75rem);
        width: $sizeFontLarge;
      }
    }

    &.alert-success {
      background-color: $colorGreen;

      .success-icon {
        display: block;
        position: absolute;
        background-color: $colorWhite;
        border-radius: 50%;
        left: $sizeRegular;

        @include polyFluidSizing(width, map-get($fontSizeCurves, big));
        @include polyFluidSizing(height, map-get($fontSizeCurves, big));

        svg {
          fill: $colorGreen;

          @include polyFluidSizing(width, map-get($fontSizeCurves, big));
          @include polyFluidSizing(height, map-get($fontSizeCurves, big));
        }
      }
    }

    &__close {
      display: block;
      position: absolute;
      right: $sizeRegular;
      top: calc(50% - 0.75rem);
      cursor: pointer;

      svg {
        width: $sizeFontRegular;
        fill: $colorWhite;
      }
    }

    &.show {
      display: block;
    }
  }

  strong.boxhead {
    display: block;

    @include polyFluidSizing('font-size', map-get($fontSizeCurves, biggerRegular));
    @include sizeCurve('margin-bottom', tiny);
  }
}
